--
-- File generated with SQLiteStudio v3.4.17 on пн май 12 19:24:07 2025
--
-- Text encoding used: UTF-8
--
PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Table: Auth
CREATE TABLE IF NOT EXISTS Auth (login TEXT (0, 32) PRIMARY KEY UNIQUE NOT NULL, password TEXT (0, 16) UNIQUE NOT NULL);

-- Table: Cheque
CREATE TABLE IF NOT EXISTS Cheque (id INTEGER PRIMARY KEY NOT NULL, dish TEXT REFERENCES Dish (Name) NOT NULL, totalcost REAL NOT NULL, paid INTEGER (0, 1) NOT NULL);

-- Table: Dish
CREATE TABLE IF NOT EXISTS Dish (name TEXT PRIMARY KEY NOT NULL, comp TEXT, image BLOB, cost REAL NOT NULL);

-- Table: Menu
CREATE TABLE IF NOT EXISTS Menu (id NUMERIC (0, 10000) PRIMARY KEY UNIQUE NOT NULL, dish TEXT (0, 100) NOT NULL UNIQUE REFERENCES Dish (Name));

-- Создание таблицы категорий блюд
CREATE TABLE IF NOT EXISTS Categories (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL UNIQUE,
  description TEXT,
  image_url TEXT
);

-- Создание таблицы блюд
CREATE TABLE IF NOT EXISTS Dishes (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT,
  composition TEXT,
  price REAL NOT NULL,
  image_url TEXT,
  category_id INTEGER,
  weight INTEGER,
  is_available BOOLEAN DEFAULT 1,
  FOREIGN KEY (category_id) REFERENCES Categories(id)
);

-- Создание таблицы пользователей
CREATE TABLE IF NOT EXISTS Users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  phone TEXT NOT NULL UNIQUE,
  password TEXT NOT NULL,
  name TEXT,
  address TEXT,
  email TEXT,
  role TEXT DEFAULT 'user',
  registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создание таблицы заказов
CREATE TABLE IF NOT EXISTS Orders (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  phone TEXT NOT NULL,
  address TEXT,
  total_cost REAL NOT NULL,
  status TEXT DEFAULT 'new',
  order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  delivery_notes TEXT,
  FOREIGN KEY (user_id) REFERENCES Users(id)
);

-- Создание таблицы элементов заказа
CREATE TABLE IF NOT EXISTS OrderItems (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  order_id INTEGER NOT NULL,
  dish_id INTEGER NOT NULL,
  quantity INTEGER NOT NULL,
  price REAL NOT NULL,
  FOREIGN KEY (order_id) REFERENCES Orders(id),
  FOREIGN KEY (dish_id) REFERENCES Dishes(id)
);

COMMIT TRANSACTION;
PRAGMA foreign_keys = on;

-- Вставка базовых категорий
INSERT INTO Categories (name, description, image_url) VALUES
('Первые блюда', 'Супы, борщи и другие первые блюда', 'https://i.ibb.co/zQ4Jyf7/soup.jpg'),
('Вторые блюда', 'Горячие вторые блюда', 'https://i.ibb.co/PYhDJyg/main.jpg'),
('Салаты', 'Свежие и вкусные салаты', 'https://i.ibb.co/VHyBb8Y/salad.jpg'),
('Закуски', 'Легкие закуски и снеки', 'https://i.ibb.co/DgCm9jb/starters.jpg'),
('Десерты', 'Сладкие десерты, торты и пирожные', 'https://i.ibb.co/B4j8RKS/dessert.jpg'),
('Напитки', 'Различные напитки к вашему столу', 'https://i.ibb.co/xHwT4YP/drinks.jpg');

-- Вставка тестовых блюд
INSERT INTO Dishes (name, description, composition, price, image_url, category_id, weight) VALUES
('Борщ', 'Классический украинский борщ со сметаной', 'Свекла, капуста, морковь, лук, говядина, сметана', 7.50, 'https://i.ibb.co/b6YjqBJ/borsch.jpg', 1, 350),
('Суп-лапша', 'Домашний куриный суп с лапшой', 'Куриное филе, лапша, морковь, лук, специи', 6.20, 'https://i.ibb.co/4g4MkMG/noodle-soup.jpg', 1, 300),
('Шницель', 'Сочный шницель из свинины', 'Свинина, панировка, специи', 12.80, 'https://i.ibb.co/YDzQbvR/schnitzel.jpg', 2, 200),
('Пельмени', 'Домашние пельмени с мясом', 'Мясной фарш, тесто, лук, чеснок', 9.40, 'https://i.ibb.co/G3CvVGz/pelmeni.jpg', 2, 250),
('Цезарь', 'Классический салат Цезарь с курицей', 'Куриное филе, салат Романо, помидоры черри, сыр пармезан, гренки, соус Цезарь', 10.90, 'https://i.ibb.co/GtxdsSy/caesar.jpg', 3, 180),
('Греческий', 'Традиционный греческий салат', 'Помидоры, огурцы, перец, лук, маслины, сыр фета, оливковое масло', 9.70, 'https://i.ibb.co/KrQsYtH/greek.jpg', 3, 200),
('Картофель фри', 'Хрустящий картофель фри', 'Картофель, растительное масло, соль', 4.50, 'https://i.ibb.co/9qScj4k/fries.jpg', 4, 150),
('Наггетсы', 'Куриные наггетсы с соусом', 'Куриное филе, панировка, соус', 7.30, 'https://i.ibb.co/pZ3V4WR/nuggets.jpg', 4, 180),
('Чизкейк', 'Нежный чизкейк Нью-Йорк', 'Сливочный сыр, печенье, сливки, сахар', 8.90, 'https://i.ibb.co/jVXsC72/cheesecake.jpg', 5, 120),
('Тирамису', 'Классический десерт Тирамису', 'Маскарпоне, печенье савоярди, кофе, какао', 9.20, 'https://i.ibb.co/BjDbZBz/tiramisu.jpg', 5, 150),
('Кола', 'Классическая кола', 'Газированная вода, сахар, краситель, ароматизаторы', 2.50, 'https://i.ibb.co/kHZ08j7/cola.jpg', 6, 330),
('Минеральная вода', 'Газированная минеральная вода', 'Очищенная вода, минералы', 1.80, 'https://i.ibb.co/9w1PxB6/water.jpg', 6, 500),
('Грибной крем-суп', 'Нежный сливочный суп из шампиньонов', 'Шампиньоны, сливки, лук, морковь, картофель, зелень', 8.50, 'https://example.com/image1.jpg', 1, 300),
('Солянка', 'Традиционная мясная солянка', 'Говядина, колбаса, ветчина, огурцы, оливки, томатная паста, сметана', 9.20, 'https://example.com/image2.jpg', 1, 350),
('Уха', 'Наваристая уха из речной рыбы', 'Судак, картофель, лук, морковь, зелень, специи', 7.80, 'https://example.com/image3.jpg', 1, 320),
('Гороховый суп', 'Густой гороховый суп с копченостями', 'Горох, копченые ребрышки, картофель, морковь, лук', 6.90, 'https://example.com/image4.jpg', 1, 330),
('Стейк из говядины', 'Сочный стейк из мраморной говядины', 'Говядина, специи, оливковое масло', 19.90, 'https://example.com/image5.jpg', 2, 280),
('Куриное филе на гриле', 'Нежное куриное филе, приготовленное на гриле', 'Филе курицы, специи, оливковое масло', 11.50, 'https://example.com/image6.jpg', 2, 220),
('Рыба запеченная', 'Филе рыбы, запеченное с овощами', 'Филе судака, помидоры, лук, перец, сыр', 14.30, 'https://example.com/image7.jpg', 2, 250),
('Плов', 'Ароматный плов с говядиной', 'Рис, говядина, морковь, лук, специи, растительное масло', 10.80, 'https://example.com/image8.jpg', 2, 350),
('Овощной салат', 'Свежий салат из сезонных овощей', 'Помидоры, огурцы, перец, лук, оливковое масло', 5.90, 'https://example.com/image9.jpg', 3, 180),
('Оливье', 'Классический салат Оливье с курицей', 'Картофель, морковь, горошек, огурцы, яйца, курица, майонез', 8.20, 'https://example.com/image10.jpg', 3, 200),
('Винегрет', 'Традиционный винегрет', 'Свекла, картофель, морковь, горошек, огурцы, растительное масло', 6.30, 'https://example.com/image11.jpg', 3, 190),
('Крабовый салат', 'Салат с крабовыми палочками', 'Крабовые палочки, кукуруза, рис, яйца, огурцы, майонез', 7.40, 'https://example.com/image12.jpg', 3, 180),
('Сырные палочки', 'Хрустящие сырные палочки', 'Сыр, мука, яйца, панировка', 6.90, 'https://example.com/image13.jpg', 4, 160),
('Гренки с чесноком', 'Хрустящие гренки с чесночным вкусом', 'Хлеб, чеснок, растительное масло, соль', 3.90, 'https://example.com/image14.jpg', 4, 120),
('Кольца кальмара', 'Жареные кольца кальмара', 'Кальмар, мука, яйца, панировка, соус тартар', 8.70, 'https://example.com/image15.jpg', 4, 170),
('Брускетты с томатами', 'Итальянские брускетты с томатами и базиликом', 'Багет, помидоры, чеснок, базилик, оливковое масло', 5.50, 'https://example.com/image16.jpg', 4, 140),
('Шоколадный фондан', 'Теплый шоколадный фондан с жидкой начинкой', 'Шоколад, масло, яйца, сахар, мука', 9.80, 'https://example.com/image17.jpg', 5, 130),
('Яблочный штрудель', 'Классический яблочный штрудель с корицей', 'Яблоки, тесто фило, корица, сахар, изюм', 7.60, 'https://example.com/image18.jpg', 5, 170),
('Чай', 'Ароматный чай с лимоном', 'Чайная заварка, лимон, сахар', 1.90, 'https://example.com/image19.jpg', 6, 250),
('Кофе эспрессо', 'Крепкий эспрессо', 'Зерна кофе арабика', 2.20, 'https://example.com/image20.jpg', 6, 50),
('Щи', 'Традиционные русские щи из свежей капусты', 'Капуста, морковь, лук, картофель, говядина, специи', 7.20, 'https://example.com/image21.jpg', 1, 340),
('Рассольник', 'Традиционный рассольник с перловкой', 'Перловка, соленые огурцы, картофель, морковь, лук, говядина', 7.80, 'https://example.com/image22.jpg', 1, 320),
('Окрошка', 'Холодный суп окрошка на квасе', 'Квас, огурцы, редис, картофель, яйца, колбаса, зелень', 6.50, 'https://example.com/image23.jpg', 1, 300),
('Холодник', 'Холодный свекольный суп', 'Свекла, огурцы, яйца, кефир, зелень', 6.30, 'https://example.com/image24.jpg', 1, 280),
('Суп-пюре из тыквы', 'Нежный тыквенный суп-пюре со сливками', 'Тыква, лук, морковь, сливки, специи', 7.90, 'https://example.com/image25.jpg', 1, 290),
('Харчо', 'Грузинский пряный суп харчо', 'Говядина, рис, томаты, специи, чеснок, зелень', 8.80, 'https://example.com/image26.jpg', 1, 330),
('Чечевичный суп', 'Питательный суп из чечевицы', 'Чечевица, морковь, лук, чеснок, специи', 6.70, 'https://example.com/image27.jpg', 1, 310),
('Минестроне', 'Итальянский овощной суп', 'Фасоль, цукини, томаты, лук, морковь, сельдерей, макароны', 8.40, 'https://example.com/image28.jpg', 1, 320),
('Котлеты по-киевски', 'Сочные котлеты с маслом внутри', 'Куриное филе, сливочное масло, зелень, панировка', 13.50, 'https://example.com/image29.jpg', 2, 230),
('Бефстроганов', 'Классический бефстроганов', 'Говяжья вырезка, сметана, лук, грибы, специи', 15.90, 'https://example.com/image30.jpg', 2, 250),
('Голубцы', 'Традиционные голубцы с мясом', 'Капуста, мясной фарш, рис, лук, морковь, томатный соус', 12.30, 'https://example.com/image31.jpg', 2, 290),
('Лазанья', 'Итальянская лазанья с мясом', 'Тесто для лазаньи, фарш, томатный соус, бешамель, сыр', 14.50, 'https://example.com/image32.jpg', 2, 300),
('Паста Карбонара', 'Классическая паста карбонара', 'Спагетти, бекон, яйца, сыр пармезан, черный перец', 13.80, 'https://example.com/image33.jpg', 2, 270),
('Ризотто с грибами', 'Ризотто с белыми грибами', 'Рис арборио, белые грибы, лук, сливочное масло, пармезан', 12.90, 'https://example.com/image34.jpg', 2, 280),
('Гуляш', 'Венгерский гуляш из говядины', 'Говядина, лук, паприка, томаты, картофель, специи', 14.20, 'https://example.com/image35.jpg', 2, 320),
('Жаркое', 'Традиционное жаркое в горшочке', 'Свинина, картофель, морковь, лук, специи', 12.70, 'https://example.com/image36.jpg', 2, 340),
('Курица с картофелем', 'Запеченная курица с картофелем', 'Куриные бедра, картофель, чеснок, специи', 13.20, 'https://example.com/image37.jpg', 2, 350),
('Рататуй', 'Французское овощное блюдо', 'Баклажаны, цукини, помидоры, перец, лук, чеснок, оливковое масло', 10.40, 'https://example.com/image38.jpg', 2, 260),
('Паэлья', 'Испанская паэлья с морепродуктами', 'Рис, креветки, мидии, кальмары, перец, горошек, шафран', 16.50, 'https://example.com/image39.jpg', 2, 320),
('Долма', 'Фаршированные виноградные листья', 'Виноградные листья, рис, фарш, лук, специи', 13.90, 'https://example.com/image40.jpg', 2, 240),
('Свиные ребрышки', 'Запеченные ребрышки в медовом соусе', 'Свиные ребрышки, мед, соевый соус, чеснок, специи', 15.40, 'https://example.com/image41.jpg', 2, 300),
('Овощное рагу', 'Ароматное овощное рагу', 'Баклажаны, кабачки, морковь, лук, перец, томаты', 9.70, 'https://example.com/image42.jpg', 2, 270),
('Мясо по-французски', 'Запеченное мясо под сырной корочкой', 'Свинина, лук, сыр, майонез, специи', 14.90, 'https://example.com/image43.jpg', 2, 280),
('Фасоль запеченная', 'Запеченная фасоль с овощами и беконом', 'Фасоль, бекон, лук, морковь, томатный соус', 10.30, 'https://example.com/image44.jpg', 2, 250),
('Салат с тунцом', 'Легкий салат с тунцом и овощами', 'Тунец, салат, огурцы, помидоры, яйца, оливковое масло', 9.50, 'https://example.com/image45.jpg', 3, 200),
('Салат Мимоза', 'Традиционный слоеный салат', 'Рыбные консервы, картофель, морковь, яйца, майонез', 8.80, 'https://example.com/image46.jpg', 3, 190),
('Салат с креветками', 'Салат с креветками и авокадо', 'Креветки, авокадо, салат, огурцы, лимонный сок', 12.40, 'https://example.com/image47.jpg', 3, 180),
('Салат Капрезе', 'Итальянский салат с моцареллой', 'Помидоры, моцарелла, базилик, оливковое масло, бальзамический уксус', 10.20, 'https://example.com/image48.jpg', 3, 170),
('Салат Нисуаз', 'Французский салат с тунцом', 'Тунец, яйца, зеленая фасоль, картофель, помидоры, оливки', 11.50, 'https://example.com/image49.jpg', 3, 210),
('Табуле', 'Ближневосточный салат с булгуром', 'Булгур, петрушка, мята, помидоры, огурцы, лимонный сок', 9.30, 'https://example.com/image50.jpg', 3, 170),
('Салат из морепродуктов', 'Салат с миксом морепродуктов', 'Креветки, кальмары, мидии, салат, огурцы, лимонный сок', 13.80, 'https://example.com/image51.jpg', 3, 190),
('Салат с курицей и ананасами', 'Сладко-острый салат', 'Куриное филе, ананасы, салат, огурцы, кукуруза, майонез', 9.90, 'https://example.com/image52.jpg', 3, 200),
('Руккола с креветками', 'Легкий салат с рукколой и креветками', 'Руккола, креветки, пармезан, оливковое масло, лимонный сок', 12.20, 'https://example.com/image53.jpg', 3, 160),
('Сельдь под шубой', 'Традиционный слоеный салат', 'Сельдь, картофель, свекла, морковь, яйца, майонез', 8.40, 'https://example.com/image54.jpg', 3, 210),
('Жареные креветки', 'Креветки, обжаренные с чесноком', 'Креветки, чеснок, оливковое масло, лимонный сок, петрушка', 13.90, 'https://example.com/image55.jpg', 4, 180),
('Тарталетки с икрой', 'Тарталетки с красной икрой', 'Тарталетки, сливочное масло, красная икра, зелень', 15.60, 'https://example.com/image56.jpg', 4, 120),
('Канапе ассорти', 'Набор разнообразных канапе', 'Багет, сыр, ветчина, оливки, помидоры черри, зелень', 9.40, 'https://example.com/image57.jpg', 4, 180),
('Форшмак', 'Традиционный форшмак из сельди', 'Сельдь, яблоко, лук, хлеб, яйца, масло', 7.80, 'https://example.com/image58.jpg', 4, 150),
('Куриные крылышки', 'Острые куриные крылышки', 'Куриные крылышки, острый соус, специи', 10.50, 'https://example.com/image59.jpg', 4, 200),
('Греческие оливки', 'Ассорти оливок с фетой', 'Оливки, сыр фета, оливковое масло, орегано', 8.20, 'https://example.com/image60.jpg', 4, 130),
('Хумус с питой', 'Ближневосточная закуска из нута', 'Нут, тахини, чеснок, лимонный сок, оливковое масло, пита', 7.50, 'https://example.com/image61.jpg', 4, 170),
('Фаршированные яйца', 'Яйца, фаршированные паштетом', 'Яйца, паштет, майонез, зелень', 6.40, 'https://example.com/image62.jpg', 4, 140),
('Сырная тарелка', 'Ассорти элитных сыров', 'Пармезан, дор блю, бри, чеддер, мед, виноград', 16.90, 'https://example.com/image63.jpg', 4, 190),
('Морс', 'Домашний ягодный морс', 'Клюква, черная смородина, вода, сахар', 3.20, 'https://example.com/image64.jpg', 6, 300),
('Лимонад', 'Освежающий домашний лимонад', 'Лимон, мята, вода, сахар', 3.50, 'https://example.com/image65.jpg', 6, 350),
('Сок яблочный', 'Свежевыжатый яблочный сок', 'Яблоки', 4.10, 'https://example.com/image66.jpg', 6, 250),
('Сок апельсиновый', 'Свежевыжатый апельсиновый сок', 'Апельсины', 4.30, 'https://example.com/image67.jpg', 6, 250),
('Капучино', 'Классический капучино', 'Эспрессо, молоко, молочная пена', 3.80, 'https://example.com/image68.jpg', 6, 180),
('Латте', 'Кофе латте с молоком', 'Эспрессо, молоко', 3.90, 'https://example.com/image69.jpg', 6, 250),
('Американо', 'Классический американо', 'Эспрессо, вода', 2.60, 'https://example.com/image70.jpg', 6, 150),
('Глинтвейн', 'Согревающий глинтвейн', 'Красное вино, апельсин, корица, гвоздика, мед', 5.80, 'https://example.com/image71.jpg', 6, 200),
('Милкшейк', 'Ванильный милкшейк', 'Молоко, мороженое, ваниль', 4.70, 'https://example.com/image72.jpg', 6, 300),
('Смузи', 'Фруктовый смузи', 'Бананы, клубника, молоко, мед', 5.20, 'https://example.com/image73.jpg', 6, 320),
('Чай с лимоном', 'Ароматный чай с лимоном', 'Черный чай, лимон, сахар', 2.10, 'https://example.com/image74.jpg', 6, 250),
('Горячий шоколад', 'Густой горячий шоколад', 'Молоко, какао, шоколад, сахар', 4.90, 'https://example.com/image75.jpg', 6, 200),
('Пирожное Наполеон', 'Слоеное пирожное с заварным кремом', 'Слоеное тесто, заварной крем, сахарная пудра', 6.40, 'https://example.com/image76.jpg', 5, 150),
('Медовик', 'Традиционный медовый торт', 'Медовые коржи, сметанный крем', 6.80, 'https://example.com/image77.jpg', 5, 160),
('Эклер', 'Французский эклер с заварным кремом', 'Заварное тесто, заварной крем, шоколадная глазурь', 5.90, 'https://example.com/image78.jpg', 5, 90),
('Панакота', 'Итальянский сливочный десерт', 'Сливки, желатин, ванильный сахар, ягодный соус', 7.30, 'https://example.com/image79.jpg', 5, 120),
('Муссовый торт', 'Нежный шоколадно-малиновый мусс', 'Шоколадный бисквит, шоколадный мусс, малиновый мусс', 8.20, 'https://example.com/image80.jpg', 5, 140),
('Мороженое', 'Ассорти из трех видов мороженого', 'Ванильное, шоколадное и клубничное мороженое, вафельный рожок', 6.70, 'https://example.com/image81.jpg', 5, 150),
('Фруктовый салат', 'Свежий фруктовый салат', 'Яблоки, груши, апельсины, киви, виноград, мята', 7.10, 'https://example.com/image82.jpg', 5, 180),
('Блинчики', 'Блинчики с вареньем', 'Блины, варенье, сметана', 5.60, 'https://example.com/image83.jpg', 5, 200),
('Сорбет', 'Освежающий фруктовый сорбет', 'Лимон, малина, вода, сахар', 6.30, 'https://example.com/image84.jpg', 5, 110),
('Штрудель с вишней', 'Австрийский штрудель с вишней', 'Тесто фило, вишня, сахар, корица', 7.80, 'https://example.com/image85.jpg', 5, 170),
('Брауни', 'Шоколадное пирожное брауни', 'Шоколад, масло, яйца, мука, орехи', 6.90, 'https://example.com/image86.jpg', 5, 130),
('Маффин шоколадный', 'Американский шоколадный маффин', 'Шоколад, мука, яйца, масло, сахар', 5.50, 'https://example.com/image87.jpg', 5, 100),
('Крем-брюле', 'Французский десерт с карамельной корочкой', 'Яичные желтки, сливки, ваниль, сахар', 8.40, 'https://example.com/image88.jpg', 5, 120);

-- Создание тестового пользователя
INSERT INTO Users (phone, password, name, address) VALUES
('375291234567', 'password', 'Тестовый Пользователь', 'ул. Примерная, д. 10, кв. 5');

-- Создание администратора
INSERT INTO Users (phone, password, name, role) VALUES
('375257777777', 'admin123', 'Администратор', 'admin');
